# SHRI-2018. Performance

В рамках домашнего задания ШРИ-2018 был осуществлен анализ производительности портала lifehacker.ru.
Проведенный анализ позволил выявить следующие проблемы:


## Проблема №1. Размер DOM-дерева главной страницы
При загрузке главной страницы сервер рендерит огромное DOM-дерево из ~2500 элементов со сложной структурой вложенности. 

Парсинг DOM-дерева такого объема приводит к задержке первого показа, а дальнейший доступ к DOM со стороны скриптов в данном случае может вызывать утечки производительности.
#### Решение
Сокращение количества DOM-элементов на первом экране. Последовательный рендеринг контента в процессе взаимодействия со страницей, например во время скролла. 

## Проблема №2. Неоптимизированные изображения
Карточки статей используют в качестве миниатюр неоптимизированные изображения разрешением 1600*800.
Размер каждого - ~150кб. Общий размер изображений на полностью загруженной странице составляет около 3мб.
#### Решение
Оптимизировать размер используемых изображений в зависимости от контекста использования.

## Проблема №3. Блокирующие скрипты
Перед тем как отрендерить страницу браузер скачивает и парсит около 700кб кода из ~20 ичсточников. Это приводит к задержке первого показа на 0.25-1.5с, в зависимости от производительности ЭВМ и скорости интернет-соединения
#### Решение
Размещать скрипты в конце страницы с тегами async/defer
для асинхронной загрузки.

## Проблема №4. Кэширование статики
Вся статика кэшируется на 24 часа, либо не кэшируется вообще. Из-за этого одни и те же ресурсы загружаются из интернета бесконечно. А еси бы статика лежала в кэше, то страница загружала бы их с локального диска, вот.
#### Решение
24 часа - отличный срок хранения в кэше для изображений, которые приходят и уходят, но срок кэша постоянной статики можно было бы увеличить до года, например.


## Проблема №5. CDN не используется
Вернее используется, но для 4 картинок он используется. Очень странная политика, конечно. Раздача ресурсов с одного сервера приводит к тому, что потраченное на загрузку данных ресурсов время возрастает пропорционально физическому отдалению пользователя от сервера.
#### Решение
Использовать CDN для раздачи статических ресурсов

## Проблема №6. Минификация CSS и JS
Большая часть ресурсов не минифицирована, что приводит к увеличению размера файлов и времени загрузки соответственно.
#### Решение
Минификация CSS и JS файлов.